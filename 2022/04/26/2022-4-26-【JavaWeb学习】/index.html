<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>JavaWeb学习 | 漫漫长夜</title><meta name="keywords" content="JavaWeb"><meta name="author" content="Lost丶逝水如风"><meta name="copyright" content="Lost丶逝水如风"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="JavaWeb概述什么是javaweb？ JavaWeb是指，通过java语言编写可以通过浏览器访问的程序的总称，叫做javaweb。 javaweb是基于请求和响应来开发的  什么是请求？  请求是指客户端给服务器发送数据，叫做Request  什么是响应？  响应实质服务器给客户端传回数据，叫做响应Response  请求和响应的关系？  请求和响应是成对出现的，有请求就有响应   Web资源">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaWeb学习">
<meta property="og:url" content="https://lw-maple.github.io/2022/04/26/2022-4-26-%E3%80%90JavaWeb%E5%AD%A6%E4%B9%A0%E3%80%91/index.html">
<meta property="og:site_name" content="漫漫长夜">
<meta property="og:description" content="JavaWeb概述什么是javaweb？ JavaWeb是指，通过java语言编写可以通过浏览器访问的程序的总称，叫做javaweb。 javaweb是基于请求和响应来开发的  什么是请求？  请求是指客户端给服务器发送数据，叫做Request  什么是响应？  响应实质服务器给客户端传回数据，叫做响应Response  请求和响应的关系？  请求和响应是成对出现的，有请求就有响应   Web资源">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://lw-maple.github.io/img/coverImg/13.jpg">
<meta property="article:published_time" content="2022-04-26T11:34:43.000Z">
<meta property="article:modified_time" content="2022-10-13T09:36:19.041Z">
<meta property="article:author" content="Lost丶逝水如风">
<meta property="article:tag" content="JavaWeb">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://lw-maple.github.io/img/coverImg/13.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://lw-maple.github.io/2022/04/26/2022-4-26-%E3%80%90JavaWeb%E5%AD%A6%E4%B9%A0%E3%80%91/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="manifest" href="/img/pwa/manifest.json"/><link rel="apple-touch-icon" sizes="180x180" href="/img/pwa/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/img/pwa/32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/img/pwa/16.png"/><link rel="mask-icon" href="/img/pwa/safari-pinned-tab.svg" color="#5bbad5"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'JavaWeb学习',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-10-13 17:36:19'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/self/atom-one-dark.css"><meta name="generator" content="Hexo 6.2.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">122</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">26</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1GJ411x7h7"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/coverImg/13.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">漫漫长夜</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1GJ411x7h7"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">JavaWeb学习</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-04-26T11:34:43.000Z" title="发表于 2022-04-26 19:34:43">2022-04-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-10-13T09:36:19.041Z" title="更新于 2022-10-13 17:36:19">2022-10-13</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/JavaEE/">JavaEE</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">8.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>39分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="JavaWeb学习"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="JavaWeb概述"><a href="#JavaWeb概述" class="headerlink" title="JavaWeb概述"></a>JavaWeb概述</h2><h3 id="什么是javaweb？"><a href="#什么是javaweb？" class="headerlink" title="什么是javaweb？"></a>什么是javaweb？</h3><ul>
<li>JavaWeb是指，通过java语言编写可以通过浏览器访问的程序的总称，叫做javaweb。</li>
<li>javaweb是基于请求和响应来开发的</li>
</ul>
<p><strong>什么是请求？</strong></p>
<ul>
<li>请求是指客户端给服务器发送数据，叫做<strong>Request</strong></li>
</ul>
<p><strong>什么是响应？</strong></p>
<ul>
<li>响应实质服务器给客户端传回数据，叫做响应<strong>Response</strong></li>
</ul>
<p><strong>请求和响应的关系？</strong></p>
<ul>
<li>请求和响应是成对出现的，有请求就有响应</li>
</ul>
<p><img src="https://s1.ax1x.com/2022/04/04/qq8d8U.png"></p>
<h3 id="Web资源的分类"><a href="#Web资源的分类" class="headerlink" title="Web资源的分类"></a>Web资源的分类</h3><ul>
<li>web资源按照实现的技术和呈现的效果不同，分为静态资源和动态资源</li>
<li><strong>静态资源</strong>：html，css，js，txt，mp4，jpg图片等</li>
<li><strong>动态资源</strong>：jsp页面，servlet程序</li>
</ul>
<h2 id="Servlet技术"><a href="#Servlet技术" class="headerlink" title="Servlet技术"></a>Servlet技术</h2><h3 id="1-什么是Servlet"><a href="#1-什么是Servlet" class="headerlink" title="1.什么是Servlet"></a>1.什么是Servlet</h3><p>Servlet是一种<strong>运行在服务器端(一般指的是 Web 服务器)的 Java 应用程序</strong>，可以生成动态的 Web 页面，它是属于客户与服务器响应的中间层。因此，可以说，JSP就是Servlet。两者可以实现同样的页面效果，不过，编写 JSP 和编写 Servlet 相比，前者成本低得多</p>
<ul>
<li>Servlet是JavaEE规范之一，规范就是接口</li>
<li>Servlet就是JavaWeb的三大组件之一：Servlet程序，Filter过滤器，Listener监听器</li>
<li>Servlet就是运行在服务器上的一个java小程序，<strong>它可以接收客户端发过来的请求，并响应数据给客户端</strong>。</li>
</ul>
<h3 id="2-Servlet实现"><a href="#2-Servlet实现" class="headerlink" title="2.Servlet实现"></a>2.Servlet实现</h3><ul>
<li>编写一个类去实现Servlet接口</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.me.servlet;<br><br><span class="hljs-keyword">import</span> javax.servlet.*;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloServlet</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Servlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(ServletConfig servletConfig)</span> <span class="hljs-keyword">throws</span> ServletException &#123;<br><br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> ServletConfig <span class="hljs-title function_">getServletConfig</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>	<span class="hljs-comment">//Service方法是专门处理请求和响应的</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">service</span><span class="hljs-params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        System.out.println(<span class="hljs-string">&quot;Hello Servlet 被访问了！&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getServletInfo</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">destroy</span><span class="hljs-params">()</span> &#123;<br><br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>

<ul>
<li>到web.xml去配置servlet程序的访问地址</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">web-app</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">version</span>=<span class="hljs-string">&quot;4.0&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>                <span class="hljs-comment">&lt;!--name 给servlet程序取别名--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.me.servlet.HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>                <span class="hljs-comment">&lt;!--class是servlet程序的全类名--&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>                <span class="hljs-comment">&lt;!--name 告诉服务器我要调用哪个servlet程序--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/hello<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br>                <span class="hljs-comment">&lt;!--url 自定义访问地址--&gt;</span><br>                <span class="hljs-comment">&lt;!--/ 表示为 http://ip:port/工程路径--&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">web-app</span>&gt;</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>或者使用@WebServlet注解</p>
</blockquote>
<ul>
<li>工程地址</li>
</ul>
<p><img src="https://s1.ax1x.com/2022/04/04/qq0mLT.png"></p>
<ul>
<li>访问配置的地址</li>
</ul>
<p><img src="https://s1.ax1x.com/2022/04/04/qq0UeO.png" alt="qq0UeO.png"></p>
<ul>
<li>显示被访问了</li>
</ul>
<p><img src="https://s1.ax1x.com/2022/04/04/qq0DfA.png" alt="qq0DfA.png"></p>
<h3 id="3-继承Httpservlet实现Servlet程序"><a href="#3-继承Httpservlet实现Servlet程序" class="headerlink" title="3.继承Httpservlet实现Servlet程序"></a>3.继承Httpservlet实现Servlet程序</h3><ul>
<li><p>编写一个类去继承HttpServlet类</p>
</li>
<li><p>根据业务需求重写doGet和doPost方法</p>
</li>
<li><p>到web.xml中配置Servlet程序的访问地址</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.me.servlet;<br><br><span class="hljs-keyword">import</span> javax.servlet.ServletException;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloServlet2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br><br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-comment">//在Get请求中调用</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        System.out.println(<span class="hljs-string">&quot;调用了doGet方法&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-comment">//在Post请求中调用</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        System.out.println(<span class="hljs-string">&quot;调用了doPost方法&quot;</span>);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<ul>
<li>IDEA快速生成Servlet<ul>
<li>自动继承HttpServlet</li>
<li>自动重写get和post</li>
<li>自动配置到xml的servlet</li>
<li><strong>我们只需要配置servletmap和写get和post方法</strong></li>
</ul>
</li>
</ul>
<p><img src="https://s1.ax1x.com/2022/04/05/qO3Kmj.png"></p>
<h3 id="请求与与响应"><a href="#请求与与响应" class="headerlink" title="请求与与响应"></a>请求与与响应</h3><h4 id="HttpServletRequest"><a href="#HttpServletRequest" class="headerlink" title="HttpServletRequest"></a>HttpServletRequest</h4><ul>
<li><p>每次有请求传入Tomcat服务器，tomcat服务器就会把请求过来的http协议信息解析好封装到Requst对象内之后传递到service方法中的doget和dopost中给我们使用</p>
</li>
<li><p>常用方法</p>
<ul>
<li>getParameter()传入key返回值</li>
<li>getParameterValues()  传入key 返回值 数组</li>
</ul>
</li>
</ul>
<h4 id="请求转发"><a href="#请求转发" class="headerlink" title="请求转发"></a>请求转发</h4><p><img src="https://s1.ax1x.com/2022/04/10/LAZIcn.png"></p>
<h4 id="请求重定向"><a href="#请求重定向" class="headerlink" title="请求重定向"></a>请求重定向</h4><p><img src="https://s1.ax1x.com/2022/04/11/LVr9N6.png"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">resp.sendRedirect(<span class="hljs-string">&quot;重定向地址&quot;</span>);<br></code></pre></td></tr></table></figure>

<h4 id="HttpServletResponse"><a href="#HttpServletResponse" class="headerlink" title="HttpServletResponse"></a>HttpServletResponse</h4><ul>
<li>与Request类似，Response表示所有响应信息，我们如果需要设置返回给客户端的信息可以通过HttpServletResponse设置相应的信息返回</li>
<li>两个输出流<ul>
<li>字节流     常用于下载，传输二进制数据</li>
<li>字符流     返回字符串</li>
<li>两种流只能使用一个</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResponseServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-type">PrintWriter</span> <span class="hljs-variable">writer</span> <span class="hljs-operator">=</span> resp.getWriter();<br>        resp.setCharacterEncoding(<span class="hljs-string">&quot;UTF-8&quot;</span>);<br>        writer.write(<span class="hljs-string">&quot;世界你好&quot;</span>);<br><br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        doGet(req, resp);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="4-ServletConfig类"><a href="#4-ServletConfig类" class="headerlink" title="4.ServletConfig类"></a>4.ServletConfig类</h3><ul>
<li>是Servlet程序的配置信息类</li>
<li>作用<ol>
<li>可以获取Servlet程序的别名Servlet-name的值</li>
<li>获取初始化参数 Init-param</li>
<li>获取ServletContext对象</li>
</ol>
</li>
</ul>
<h3 id="5-ServletContext"><a href="#5-ServletContext" class="headerlink" title="5.ServletContext"></a>5.ServletContext</h3><h4 id="1-介绍"><a href="#1-介绍" class="headerlink" title="1.介绍"></a>1.介绍</h4><p>ServletContext官方叫Servlet上下文。服务器会为<strong>每一个工程创建一个对象</strong>，这个对象就是ServletContext对象。这个对象<strong>全局唯一</strong>，而且工程内部的所有servlet都<strong>共享</strong>这个对象。所以叫全局应用程序共享对象。</p>
<ul>
<li>ServletContext对象是一个域对象</li>
<li>域对象是指可以像map一样存取数据的对象，叫做域对象，域是指存取数据的操作范围</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>存</th>
<th>取</th>
<th>删</th>
</tr>
</thead>
<tbody><tr>
<td>Map</td>
<td>put()</td>
<td>get()</td>
<td>remove()</td>
</tr>
<tr>
<td>域对象</td>
<td>setAttribute()</td>
<td>getAttribute()</td>
<td>removeAttribute()</td>
</tr>
</tbody></table>
<p><img src="https://images2015.cnblogs.com/blog/917787/201703/917787-20170327181457467-462089986.png" alt="img"></p>
<h4 id="2-具体实现"><a href="#2-具体实现" class="headerlink" title="2.具体实现"></a>2.具体实现</h4><ul>
<li>创建一个放数据的类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-type">ServletContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.getServletContext();<br>        String name=<span class="hljs-string">&quot;King&quot;</span>;<br>        context.setAttribute(<span class="hljs-string">&quot;name&quot;</span>,name);<br><br>    &#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>创建一个读取它的类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GetServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-type">ServletContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.getServletContext();<br>        String name= (String) context.getAttribute(<span class="hljs-string">&quot;name&quot;</span>);<br><br><br>        resp.setContentType(<span class="hljs-string">&quot;text/html&quot;</span>);<br>        resp.setCharacterEncoding(<span class="hljs-string">&quot;utf-8&quot;</span>);<br>        resp.getWriter().print(<span class="hljs-string">&quot;名字&quot;</span>+name);<br>    &#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>配置.xml</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>HelloServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/hello<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>getname<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>GetServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>getname<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/getname<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="3-测试结果"><a href="#3-测试结果" class="headerlink" title="3.测试结果"></a>3.测试结果</h4><ul>
<li>没有访问&#x2F;hello时访问getname</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/27/MDTiJtwpo7ngZIO.png"></p>
<ul>
<li>访问&#x2F;hello后访问getname</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/27/npW6HAOvYc2KNhM.png"></p>
<h3 id="6-servlet生命周期"><a href="#6-servlet生命周期" class="headerlink" title="6.servlet生命周期"></a>6.servlet生命周期</h3><p>1.当客户端向 Web 服务器提出第一次 Servlet 请求时，Web 服务器会实例化一个 Servlet，并且调用 init()方法；如果 Web 服务器中已经存在了一个 Servlet 实例，将直接使用此实例；</p>
<p>2.然后调用 service()方法，service()方法将根据客户端的请求方式来决定调用对应的 doXXX()方法；</p>
<p>3.当 Servlet 从 Web 服务器中消亡时，Web 服务器将会调用 Servlet的destroy()方法</p>
<p><img src="https://files.catbox.moe/v2h5tr.png"></p>
<h2 id="Listener监听器"><a href="#Listener监听器" class="headerlink" title="Listener监听器"></a>Listener监听器</h2><h3 id="1-什么是Listener监听器"><a href="#1-什么是Listener监听器" class="headerlink" title="1.什么是Listener监听器"></a>1.什么是Listener监听器</h3><ul>
<li>Listener 监听器它是Javaweb的三大组件之一。JavaWeb的三大组件分别是:servlet程序、Fiter过滤器、Listener监听器。</li>
<li>Listener它是JavaEE的规范，就是接口</li>
<li>监听器的作用是，监听某种事物的变化。然后通过回调函数，反馈给客户（程序）去做一些相应的处理。</li>
</ul>
<h2 id="Filter过滤器"><a href="#Filter过滤器" class="headerlink" title="Filter过滤器"></a>Filter过滤器</h2><h3 id="1-什么是Fliter过滤器"><a href="#1-什么是Fliter过滤器" class="headerlink" title="1.什么是Fliter过滤器"></a>1.什么是Fliter过滤器</h3><ul>
<li><p>Filter过滤器它是JavaWeb的三大组件之一。三大组件分是:Servlet程序、Listener监听器、Filter过滤器。</p>
</li>
<li><p>Filter过滤器它是JavaEE的规范。也就是接口</p>
</li>
<li><p>Filter过滤器它的作用是:拦截请求，过滤响应。</p>
</li>
<li><p>常见的拦截请求</p>
<ul>
<li>权限检查</li>
<li>日记操作</li>
<li>事务管理</li>
<li>……等等</li>
</ul>
</li>
</ul>
<h3 id="Filter的实现"><a href="#Filter的实现" class="headerlink" title="Filter的实现"></a>Filter的实现</h3><ol>
<li><p>写一个类实现Filter接口</p>
<ul>
<li>初始化方法：表示的是过滤器初始化时的动作。 public void init(FilterConfig config) ; </li>
<li>消亡方法：表示的是过滤器消亡时候的动作。 public void destroy() ; </li>
<li>过滤函数：表示的是过滤器过滤时的动作。 public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) ;</li>
</ul>
</li>
<li><p>在web.xml配置Filter</p>
<ul>
<li>与Servlet类似</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>myfilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>filter.MyFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>myfilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">filter-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure></li>
</ol>
<blockquote>
<p>或者使用@WebFilter注解</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.atguigu.web;<br><br><span class="hljs-keyword">import</span> com.atguigu.pojo.User;<br><br><span class="hljs-keyword">import</span> javax.servlet.*;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpSession;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DoFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Filter</span> &#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(FilterConfig filterConfig)</span> <span class="hljs-keyword">throws</span> ServletException &#123;<br><br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doFilter</span><span class="hljs-params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="hljs-keyword">throws</span> IOException, ServletException &#123;<br>        HttpServletRequest httpServletRequest= (HttpServletRequest) servletRequest;<br>        <span class="hljs-type">HttpSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> httpServletRequest.getSession();<br>        Object user=session.getAttribute(<span class="hljs-string">&quot;name&quot;</span>);<br>        <span class="hljs-comment">//获取session，检查是否登录</span><br><br>        <span class="hljs-keyword">if</span> (user==<span class="hljs-literal">null</span>)&#123;<br>            <span class="hljs-comment">//未登录进行拦截</span><br>            servletRequest.getRequestDispatcher(<span class="hljs-string">&quot;/pages/user/login.html&quot;</span>).forward(servletRequest, servletResponse);<br><br>        &#125;<br>        <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-comment">//登录后继续执行()</span><br>            filterChain.doFilter(servletRequest, servletResponse);<br>        &#125;<br><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<ul>
<li>配置xml</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>DoFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>com.atguigu.web.DoFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">filter-mapping</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>DoFilter<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/admin/*<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li>在login页面中设置session</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.atguigu.web;<br><br><span class="hljs-keyword">import</span> com.atguigu.pojo.User;<br><span class="hljs-keyword">import</span> com.atguigu.service.UserService;<br><span class="hljs-keyword">import</span> com.atguigu.service.impl.UserServiceImpl;<br><br><span class="hljs-keyword">import</span> javax.servlet.ServletException;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-keyword">private</span> UserService userService=<span class="hljs-keyword">new</span> <span class="hljs-title class_">UserServiceImpl</span>();<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-comment">//1.获取请求参数</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;username&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;password&quot;</span>);<br>        <span class="hljs-comment">//2.调用</span><br>        <span class="hljs-type">User</span> <span class="hljs-variable">loginUser</span> <span class="hljs-operator">=</span> userService.login(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-literal">null</span>, username, password, <span class="hljs-literal">null</span>));<br>        <span class="hljs-keyword">if</span>(loginUser==<span class="hljs-literal">null</span>)&#123;<br>            System.out.println(<span class="hljs-string">&quot;登录失败&quot;</span>);<br>            req.getRequestDispatcher(<span class="hljs-string">&quot;/pages/user/login.html&quot;</span>).forward(req, resp);<br>            <span class="hljs-comment">//登录失败</span><br>        &#125;<br>        <span class="hljs-keyword">else</span> &#123;<br>            req.getSession().setAttribute(<span class="hljs-string">&quot;name&quot;</span>, username);<br>            req.getRequestDispatcher(<span class="hljs-string">&quot;/pages/user/login_success.html&quot;</span>).forward(req, resp);<br>            <span class="hljs-comment">//登录成功</span><br>        &#125;<br><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<ul>
<li>效果是，没有登录前无法访问admin目录下后的文件</li>
<li>登录后即可访问</li>
</ul>
<h2 id="JavaEE三层架构"><a href="#JavaEE三层架构" class="headerlink" title="JavaEE三层架构"></a>JavaEE三层架构</h2><p><strong>分层的目的就是为了解耦，解耦就是为了降低代码的耦合度，方便后期的维护</strong></p>
<p><img src="https://s1.ax1x.com/2022/04/11/LVyBnJ.png"></p>
<h3 id="1-Web层-x2F-视图展现层"><a href="#1-Web层-x2F-视图展现层" class="headerlink" title="1.Web层&#x2F;视图展现层"></a>1.Web层&#x2F;视图展现层</h3><ul>
<li>获取请求的参数，封装成为Bean对象</li>
<li>调用Service层处理业务</li>
<li>回传，响应数据给客户端<ul>
<li>请求重定向</li>
<li>请求转发</li>
</ul>
</li>
</ul>
<h3 id="2-Service-业务层"><a href="#2-Service-业务层" class="headerlink" title="2.Service 业务层"></a>2.Service 业务层</h3><ul>
<li>处理业务逻辑</li>
<li>调用持久层保存到数据库</li>
</ul>
<h3 id="3-DAO-持久层"><a href="#3-DAO-持久层" class="headerlink" title="3.DAO 持久层"></a>3.DAO 持久层</h3><ul>
<li>只负责跟数据库交互</li>
<li>CRUD<ul>
<li>Create 增</li>
<li>Read 查</li>
<li>Update 改</li>
<li>Delete 删</li>
</ul>
</li>
</ul>
<h2 id="Cookie与Session"><a href="#Cookie与Session" class="headerlink" title="Cookie与Session"></a>Cookie与Session</h2><h3 id="1-什么是Cookie与Session"><a href="#1-什么是Cookie与Session" class="headerlink" title="1.什么是Cookie与Session"></a>1.什么是Cookie与Session</h3><ul>
<li>Cookie</li>
</ul>
<p><img src="https://img2020.cnblogs.com/blog/1258817/202104/1258817-20210419202238432-1739744969.jpg"></p>
<p>Cookie是保存在<strong>客户端</strong>的纯文本文件。比如txt文件。所谓的客户端就是我们自己的本地电脑。当我们使用自己的电脑通过浏览器进行访问网页的时候，服务器就会生成一个证书并返回给我的浏览器并写入我们的本地电脑。这个证书就是cookie。通俗点讲就是我们在浏览网页的时候，服务器给的我们一个身份令牌，而且这个身份是唯一的，没有人和你一样，你拥有了这个身份，服务器才能认识你。但是呢Cookie具有不可跨域名性，就是假如我们现在在访问百度，那么我们不会带上谷歌的cookie。</p>
<ul>
<li>Session</li>
</ul>
<p><img src="https://s2.loli.net/2022/01/30/NYh4sgPX3y6xoz8.png"></p>
<p>Session是另一种记录客户状态的机制，不同的是Cookie保存在客户端浏览器中，而Session保存在<strong>服务器</strong>上。客户端浏览器访问服务器的时候，服务器把客户端信息以某种形式记录在服务器上。这就是Session。客户端浏览器再次访问时只需要从该Session中查找该客户的状态就可以了。每个用户访问服务器都会建立一个session，那服务器是怎么标识用户的唯一身份呢？事实上，用户与服务器建立连接的同时，服务器会自动为其分配一个SessionId。</p>
<ul>
<li>Cookie和Session的关系</li>
</ul>
<p>Session的使用需要Cookie的支持，因为单独的Session还是无法知道当前访问服务器的是否是同一个客户端，它要根据存储在Cookie中的JSESSIONID来进行判断[这个Cookie是客户端自动创建的]，如果客户端关闭了Cookie，那么Session是没有什么效果的。这个时候，需要使用URL重写的方式，将JSESSIONID直接放置在URL中，访问服务器的时候可以直接进行解析。</p>
<h3 id="2-Cookie与Session的实现"><a href="#2-Cookie与Session的实现" class="headerlink" title="2.Cookie与Session的实现"></a>2.Cookie与Session的实现</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//Cookie</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-comment">//服务器告诉你上次来的时间</span><br>        req.setCharacterEncoding(<span class="hljs-string">&quot;utf-8&quot;</span>);<br>        resp.setCharacterEncoding(<span class="hljs-string">&quot;utf-8&quot;</span>);<br>        resp.setContentType(<span class="hljs-string">&quot;text/html&quot;</span>);<br>        <span class="hljs-comment">//设置编码</span><br>        <span class="hljs-type">PrintWriter</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> resp.getWriter();<br>        <span class="hljs-comment">//1.通过请求获取cookie</span><br>        Cookie[] cookies = req.getCookies();<br>        <span class="hljs-comment">//2.判断cookie是否存在</span><br>        <span class="hljs-keyword">if</span>(cookies!=<span class="hljs-literal">null</span>)&#123;<br>            out.write(<span class="hljs-string">&quot;您上一次访问的时间为：&quot;</span>);<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; cookies.length; i++) &#123;<br>                <span class="hljs-keyword">if</span>(cookies[i].getName().equals(<span class="hljs-string">&quot;LastLoginTime&quot;</span>))&#123;<br>                    <span class="hljs-type">long</span> <span class="hljs-variable">timeStamp</span> <span class="hljs-operator">=</span> Long.parseLong(cookies[i].getValue());<br>                    Date date=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(timeStamp);<br>                    out.print(date.toLocaleString());<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">else</span>&#123;<br>            out.write(<span class="hljs-string">&quot;这是你第一次访问本站&quot;</span>);<br>        &#125;<br>        <span class="hljs-comment">//3.服务器给一个cookie，或更新cookie</span><br>        Cookie cookie=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Cookie</span>(<span class="hljs-string">&quot;LastLoginTime&quot;</span>,String.valueOf(System.currentTimeMillis()));<br>        <span class="hljs-comment">//cookie值存中文如果出现乱码可以使用urlEncoding进行编码</span><br>        <span class="hljs-comment">//Cookie cookie1=new Cookie(&quot;name&quot;, URLEncoder.encode(&quot;中文试一试？&quot;,&quot;utf-8&quot;));</span><br>        cookie.setMaxAge(<span class="hljs-number">20</span>*<span class="hljs-number">60</span>*<span class="hljs-number">60</span>);<br>        resp.addCookie(cookie);<br>    &#125;<br></code></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//Session</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        req.setCharacterEncoding(<span class="hljs-string">&quot;utf-8&quot;</span>);<br>        resp.setCharacterEncoding(<span class="hljs-string">&quot;utf-8&quot;</span>);<br>        resp.setContentType(<span class="hljs-string">&quot;text/html&quot;</span>);<br>        <span class="hljs-comment">//1.获得session</span><br>        <span class="hljs-type">HttpSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> req.getSession();<br>        <span class="hljs-comment">//2.向session中存东西</span><br>        session.setAttribute(<span class="hljs-string">&quot;name&quot;</span>,<span class="hljs-string">&quot;未来&quot;</span>);<br>        <span class="hljs-keyword">if</span>(session.isNew())&#123;<br>            resp.getWriter().write(<span class="hljs-string">&quot;session创建成功为&quot;</span>+session.getId());<br>        &#125;<br>        <span class="hljs-keyword">else</span>&#123;<br>            resp.getWriter().write(<span class="hljs-string">&quot;session在服务器中存在了，为&quot;</span>+session.getId());<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure>

<h3 id="3-总结"><a href="#3-总结" class="headerlink" title="3.总结"></a>3.总结</h3><p>1，session 在服务器端，cookie 在客户端（浏览器）<br> 2，session 默认被存在在服务器的一个文件里（不是内存）<br> 3，session 的运行依赖 session id，而 session id 是存在 cookie 中的，也就是说，如果浏览器禁用了 cookie ，同时 session 也会失效（但是可以通过其它方式实现，比如在 url 中传递 session_id）<br> 4，session 可以放在 文件、数据库、或内存中都可以。<br> 5，用户验证这种场合一般会用 session</p>
<h2 id="文件传输"><a href="#文件传输" class="headerlink" title="文件传输"></a>文件传输</h2><h3 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h3><p>1.为保证服务器安全，上传文件应该放在外界无法直接访问的目录下，比如放于WEB-INF目录下。</p>
<p>2.为防止文件覆盖的现象发生，要为上传文件产生—个唯一的文件名</p>
<p>3.要限制上传文件的最大值。</p>
<p>4.可以限制上传文件的类型，在收到上传文件名时，判断后缀名是否合法。</p>
<ul>
<li><strong>需求：</strong></li>
</ul>
<ol>
<li>要有一个form标签，method&#x3D;post</li>
<li>form标签的enctype必须为 multipart&#x2F;form-data</li>
<li>在标签中使用input type&#x3D;file添加上传的文件</li>
<li>编写服务器接收,处理上传的数据</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;http://localhost:8080/SggWeb/uploadServlet&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span> <span class="hljs-attr">enctype</span>=<span class="hljs-string">&quot;multipart/form-data&quot;</span>&gt;</span><br>        用户名：<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span>/&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>        头像：<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;photo&quot;</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;上传&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="1-导包"><a href="#1-导包" class="headerlink" title="1.导包"></a>1.导包</h4><ul>
<li>commons-io</li>
</ul>
<blockquote>
<p><strong>Commons-io</strong>是apache开源基金组织提供的一组有关IO操作的类库，可以提高IO功能开发的效率，Commons-io提供了很多有关IO操作的类</p>
</blockquote>
<ul>
<li>commons-fileupload</li>
</ul>
<blockquote>
<p>commons-fileupload为apache出品的文件上传组件，用来接收浏览器上传的组件，该组件有多个类组成</p>
</blockquote>
<h4 id="2-文件上传"><a href="#2-文件上传" class="headerlink" title="2.文件上传"></a>2.文件上传</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.me.servlet;<br><br><span class="hljs-keyword">import</span> org.apache.commons.fileupload.FileItem;<br><span class="hljs-keyword">import</span> org.apache.commons.fileupload.FileItemFactory;<br><span class="hljs-keyword">import</span> org.apache.commons.fileupload.FileUploadException;<br><span class="hljs-keyword">import</span> org.apache.commons.fileupload.disk.DiskFileItemFactory;<br><span class="hljs-keyword">import</span> org.apache.commons.fileupload.servlet.ServletFileUpload;<br><br><span class="hljs-keyword">import</span> javax.servlet.Servlet;<br><span class="hljs-keyword">import</span> javax.servlet.ServletException;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><span class="hljs-keyword">import</span> java.io.File;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UploadServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-comment">//1.判断上传的数据是否为多段数据(只有多段的数据才是文件上传)</span><br>        <span class="hljs-keyword">if</span>(ServletFileUpload.isMultipartContent(req))&#123;<br>            <span class="hljs-comment">//创建FileItemFactory工厂实现类</span><br>            FileItemFactory fileItemFactory=<span class="hljs-keyword">new</span> <span class="hljs-title class_">DiskFileItemFactory</span>();<br>            <span class="hljs-comment">//创建用于解析上传数据的解析工具类servletFileUpload</span><br>            ServletFileUpload servletFileUpload=<span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletFileUpload</span>(fileItemFactory);<br><br>            <span class="hljs-comment">//解析上传的数据，得到每个表单项FileItem</span><br><br>            <span class="hljs-keyword">try</span> &#123;<br>                List&lt;FileItem&gt; list = servletFileUpload.parseRequest(req);<br><br>                <span class="hljs-keyword">for</span> (FileItem fileItem : list) &#123;<br>                    <span class="hljs-comment">//循环判断每一个表单项是普通类型还是上传的类型</span><br>                    <span class="hljs-keyword">if</span>(fileItem.isFormField())&#123;<br>                        <span class="hljs-comment">//普通表单</span><br>                        System.out.println(<span class="hljs-string">&quot;表单的name&quot;</span>+fileItem.getFieldName());<br>                        System.out.println(<span class="hljs-string">&quot;表单的value&quot;</span>+fileItem.getString(<span class="hljs-string">&quot;UTF-8&quot;</span>));<br>                    &#125;<br>                    <span class="hljs-keyword">else</span> &#123;<br>                        System.out.println(<span class="hljs-string">&quot;表单的name&quot;</span>+fileItem.getFieldName());<br>                        System.out.println(<span class="hljs-string">&quot;上传的文件名&quot;</span>+fileItem.getName());<br><br>                        fileItem.write(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;d:\\&quot;</span>+fileItem.getName()));<br>                        <span class="hljs-comment">//文件表单</span><br>                    &#125;<br>                &#125;<br>            &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br><br><br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        doPost(req, resp);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h3 id="文件下载"><a href="#文件下载" class="headerlink" title="文件下载"></a>文件下载</h3><p><img src="https://s1.ax1x.com/2022/04/17/LUQpo4.png"></p>
<h4 id="1-实现代码"><a href="#1-实现代码" class="headerlink" title="1.实现代码"></a>1.实现代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.me.servlet;<br><br><span class="hljs-keyword">import</span> org.apache.commons.io.IOUtils;<br><br><span class="hljs-keyword">import</span> javax.servlet.ServletContext;<br><span class="hljs-keyword">import</span> javax.servlet.ServletException;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><span class="hljs-keyword">import</span> java.io.OutputStream;<br><span class="hljs-keyword">import</span> java.net.URLEncoder;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DownloadServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-comment">//1.获取文件名</span><br>        String filename=<span class="hljs-string">&quot;11.png&quot;</span>;<br>        <span class="hljs-comment">//2.获取要下载的文件内容(通过ServletContext对象)</span><br>        <span class="hljs-type">ServletContext</span> <span class="hljs-variable">servletContext</span> <span class="hljs-operator">=</span> getServletContext();<br>        <span class="hljs-comment">//在服务器 斜杠被服务器解析为工程地址http://ip:port/工程名/ 映射到web目录下</span><br><br>        <span class="hljs-comment">//3.告诉客户端回传的类型</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">mimeType</span> <span class="hljs-operator">=</span> servletContext.getMimeType(<span class="hljs-string">&quot;/file/&quot;</span> + filename);<br>        System.out.println(<span class="hljs-string">&quot;下载的文件类型为&quot;</span>+mimeType);<br>        resp.setContentType(mimeType);<br><br>        resp.setHeader(<span class="hljs-string">&quot;Content-Disposition&quot;</span>,<span class="hljs-string">&quot;attachment;filename=&quot;</span>+ URLEncoder.encode(filename,<span class="hljs-string">&quot;UTF-8&quot;</span>));<br>        <span class="hljs-comment">//4.把下载内传给客户端</span><br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">resourceAsStream</span> <span class="hljs-operator">=</span> servletContext.getResourceAsStream(<span class="hljs-string">&quot;/file/&quot;</span> + filename);<br>        <span class="hljs-comment">//之前使用字节数值实现，现在可以使用io包实现，直接用</span><br><br>        <span class="hljs-comment">//获取响应的输出流</span><br>        OutputStream outputStream=resp.getOutputStream();<br>        IOUtils.copy(resourceAsStream, outputStream);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<ul>
<li>不使用IO包，实现下载</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-comment">//1.获取文件位置</span><br>        String filePath=<span class="hljs-string">&quot;D:\\JavaSE\\JavaWeb\\JavaWeb\\WebDownload\\src\\main\\resources\\奥日.jpg&quot;</span>;<br>        <span class="hljs-comment">//2.获取文件名称</span><br>        String fileName=filePath.substring(filePath.lastIndexOf(<span class="hljs-string">&quot;\\&quot;</span>)+<span class="hljs-number">1</span>);<br>        <span class="hljs-comment">//3.设置响应头，支持下载文件</span><br>        <span class="hljs-comment">//response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment;filename=&quot;+fileName)//中文名使用URL/encode防止乱码</span><br>        resp.setHeader(<span class="hljs-string">&quot;Content-Disposition&quot;</span>,<span class="hljs-string">&quot;attachment;filename=&quot;</span>+ URLEncoder.encode(fileName,<span class="hljs-string">&quot;UTF-8&quot;</span>));<br>        <span class="hljs-comment">//4.获取文件下载输入流</span><br>        <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span><span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(filePath);<br>        <span class="hljs-comment">//5.创建缓冲区</span><br>        <span class="hljs-type">int</span> len=<span class="hljs-number">0</span>;<br>        <span class="hljs-type">byte</span>[] buffer=<span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>        <span class="hljs-comment">//6.获取对象</span><br>        <span class="hljs-type">ServletOutputStream</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> resp.getOutputStream();<br>        <span class="hljs-comment">//7.写入数据</span><br>        <span class="hljs-keyword">while</span> ((len=in.read(buffer))!=-<span class="hljs-number">1</span>)&#123;<br>            out.write(buffer,<span class="hljs-number">0</span>,len);<br>        &#125;<br>        out.close();<br>        in.close();<br>    &#125;<br></code></pre></td></tr></table></figure>

<h2 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h2><h3 id="1-什么是JSON"><a href="#1-什么是JSON" class="headerlink" title="1.什么是JSON"></a>1.什么是JSON</h3><p>JSON (JavaScr ipt Object Notaticn)是一种<strong>轻量级的数据交换格式</strong>。易于人阅读和编写。同时也易于机器解析和生成。JSON采用完全独立于语言的文本格式，而且很多语言都提供了对json的支持（包括C，C++，C#，Java,JavaScript，Perl，Python等)。这样就使得JSON成为理想的数据交换。</p>
<ul>
<li><p>轻量级指的是跟xml做比较。</p>
</li>
<li><p>数据交换指的是客户端和服务器之间业务数据的传递格式。</p>
</li>
</ul>
<p><strong>定义：</strong></p>
<ul>
<li>json是由键值对组成。</li>
<li>由花括号包围。</li>
<li>每个键由引号引起来。</li>
<li>键和值之间使用冒号进行分隔。</li>
<li>多组键值对之间进行逗号进行分隔。</li>
<li>json就是个对象</li>
</ul>
<h3 id="2-JSON在JS中的使用"><a href="#2-JSON在JS中的使用" class="headerlink" title="2. JSON在JS中的使用"></a>2. JSON在JS中的使用</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">var</span> jsonOBJ&#123;<br>    <span class="hljs-string">&quot;key1&quot;</span>:<span class="hljs-string">&quot;string&quot;</span>,<br>    <span class="hljs-string">&quot;key2&quot;</span>:<span class="hljs-number">123</span>,<br>    <span class="hljs-string">&quot;key3&quot;</span>:[<span class="hljs-number">1</span>,<span class="hljs-string">&quot;str&quot;</span>,<span class="hljs-literal">false</span>],<br>    <span class="hljs-string">&quot;key4&quot;</span>:&#123;<br>        <span class="hljs-string">&quot;key5&quot;</span>:<span class="hljs-string">&quot;445&quot;</span><br>        <span class="hljs-string">&quot;key&quot;</span>:<span class="hljs-number">1231</span><br>    &#125; <br>&#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>获取值</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">jsonOBJ.<span class="hljs-property">key</span><br></code></pre></td></tr></table></figure>

<h4 id="json对象和json字符串"><a href="#json对象和json字符串" class="headerlink" title="json对象和json字符串"></a>json对象和json字符串</h4><ul>
<li>对象和字符串是json的两种存在方式<ul>
<li>JSON.stringify()      把json对象转换成为 json字符串</li>
<li>JSON.parse()          把json字符串转换成为 json对象</li>
</ul>
</li>
</ul>
<h3 id="3-JSON在JAVA中的使用"><a href="#3-JSON在JAVA中的使用" class="headerlink" title="3.JSON在JAVA中的使用"></a>3.JSON在JAVA中的使用</h3><ul>
<li>导入gson.jar包</li>
<li>或者fastjson</li>
</ul>
<blockquote>
<p>Google Gson是一个简单的基于Java的库，用于将Java对象序列化为JSON，反之亦然。 它是由Google开发的一个开源库。</p>
</blockquote>
<ul>
<li>JSON与JAVABean对象转换</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span>&#123;<br>       User user1=<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;hah&quot;</span>, <span class="hljs-string">&quot;100234s&quot;</span>);<br><br>       <span class="hljs-type">Gson</span> <span class="hljs-variable">gson</span> <span class="hljs-operator">=</span><span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>();<br>       <span class="hljs-comment">//javaBean和json的互转</span><br>       <span class="hljs-type">String</span> <span class="hljs-variable">userJson</span> <span class="hljs-operator">=</span> gson.toJson(user1);<br>       System.out.println(userJson);<br><br>       <span class="hljs-type">User</span> <span class="hljs-variable">userString</span> <span class="hljs-operator">=</span> gson.fromJson(userJson, User.class);<br>       System.out.println(userString.toString());<br><br>   &#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>JSON与List转换</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span>&#123;<br>        Gson gson=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>();<br>        List&lt;User&gt; list=<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;hah&quot;</span>, <span class="hljs-string">&quot;100234s&quot;</span>));<br>        list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;hah&quot;</span>, <span class="hljs-string">&quot;100234s&quot;</span>));<br>        list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;hah&quot;</span>, <span class="hljs-string">&quot;100234s&quot;</span>));<br>        list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-number">4</span>, <span class="hljs-string">&quot;hah&quot;</span>, <span class="hljs-string">&quot;100234s&quot;</span>));<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">userListString</span> <span class="hljs-operator">=</span> gson.toJson(list);<br>        System.out.println(userListString);<br><br>        List&lt;User&gt; list2= gson.fromJson(userListString, <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserListType</span>().getType());<br>        System.out.println(list2.get(<span class="hljs-number">0</span>));<br><br>    &#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>JSON与Map相互转换</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span>&#123;<br>        Gson gson=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>();<br>        Map&lt;Integer,User&gt; map1=<span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br><br>        map1.put(<span class="hljs-number">4</span>,<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;hah&quot;</span>, <span class="hljs-string">&quot;100234s&quot;</span>));<br>        map1.put(<span class="hljs-number">5</span>,<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;hah&quot;</span>, <span class="hljs-string">&quot;100234s&quot;</span>));<br>        map1.put(<span class="hljs-number">6</span>,<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;hah&quot;</span>, <span class="hljs-string">&quot;100234s&quot;</span>));<br>        map1.put(<span class="hljs-number">7</span>,<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-number">4</span>, <span class="hljs-string">&quot;hah&quot;</span>, <span class="hljs-string">&quot;100234s&quot;</span>));<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">userMapList</span> <span class="hljs-operator">=</span> gson.toJson(map1);<br>        System.out.println(userMapList);<br><br>        Map&lt;Integer,User&gt; map2=gson.fromJson(userMapList, <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserMapType</span>().getType());<br>        System.out.println(map2.get(<span class="hljs-number">4</span>));<br>    &#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>List和Map 都需要写一个类去继承TypeToken并且使用相应泛型，否则无法转换成真正的Bean对象，而是map对象</li>
</ul>
<h2 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h2><h3 id="1-什么是AJAX"><a href="#1-什么是AJAX" class="headerlink" title="1.什么是AJAX"></a>1.什么是AJAX</h3><ul>
<li>AJAX即“<strong>A</strong>synchronous <strong>J</strong>avascript <strong>A</strong>nd <strong>X</strong>ML””(异步JavaScript 和XML)，是指一种创建交互式网页应用的网页开发技术。</li>
<li>ajax是一种浏览器通过js异步发起请求。局部更新页面的技术。</li>
</ul>
<h3 id="2-AJAX使用"><a href="#2-AJAX使用" class="headerlink" title="2.AJAX使用"></a>2.AJAX使用</h3><ul>
<li>前端</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ajaxRequest</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-comment">//1.创建xml对象</span><br>       <span class="hljs-keyword">var</span> xmlHttpRequest=<span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();<br>       <span class="hljs-comment">//2.设置请求参数</span><br>       xmlHttpRequest.<span class="hljs-title function_">open</span>(<span class="hljs-string">&quot;get&quot;</span>,<span class="hljs-string">&quot;http://ip:port//servlet&quot;</span>,<span class="hljs-literal">true</span>);<span class="hljs-comment">//true表示异步</span><br>       <span class="hljs-comment">//3.发送请求</span><br>       xmlHttpRequest.<span class="hljs-title function_">send</span>();<br>       <span class="hljs-comment">//4、在send方法前绑定onreadystatechange事件，处理请求完成后的操作。</span><br>       <span class="hljs-keyword">if</span>(xmlHttpRequest.<span class="hljs-property">readyState</span>==<span class="hljs-number">4</span>&amp;&amp;xmlHttpRequest.<span class="hljs-property">status</span>==<span class="hljs-number">200</span>)&#123;<br>           <span class="hljs-comment">//把响应回来的数据转为json对象显示在页面上</span><br>           <span class="hljs-keyword">var</span> obj=<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(xmlHttpRequest.<span class="hljs-property">responseText</span>);<br>           <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>().<span class="hljs-property">innerText</span>=<span class="hljs-string">&quot;编号&quot;</span>+obj.<span class="hljs-property">id</span>+<span class="hljs-string">&quot;姓名&quot;</span>+obj.<span class="hljs-property">name</span>;<br>       &#125;<br>    &#125;<br></code></pre></td></tr></table></figure>

<ul>
<li>后端</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.me.servlet;<br><br><span class="hljs-keyword">import</span> com.google.gson.Gson;<br><span class="hljs-keyword">import</span> com.me.pojo.User;<br><br><span class="hljs-keyword">import</span> javax.servlet.ServletException;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JavaScriptAjax</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        System.out.println(<span class="hljs-string">&quot;ajaxa请求过来了&quot;</span>);<br>        User user=<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-number">12</span>, <span class="hljs-string">&quot;66&quot;</span>, <span class="hljs-string">&quot;6854&quot;</span>);<br>        Gson gson=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Gson</span>();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">personJson</span> <span class="hljs-operator">=</span> gson.toJson(user);<br><br>        resp.getWriter().write(personJson);<br><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h3 id="3-JQuery的AJAX"><a href="#3-JQuery的AJAX" class="headerlink" title="3.JQuery的AJAX"></a>3.JQuery的AJAX</h3><ul>
<li>$ajax<ul>
<li>url             表示请求的地址</li>
<li>type          表示请求的类型get或者post</li>
<li>data          表示发送给服务器的数据<ul>
<li>格式有两种</li>
<li>1.name&#x3D;value&amp;name&#x3D;value</li>
<li>2.{key&#x3D;value}</li>
</ul>
</li>
<li>success     请求成功，响应的回调函数</li>
<li>dataType   <strong>响应</strong>的数据类型</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript">$.<span class="hljs-title function_">ajax</span>(&#123;<br>        <span class="hljs-attr">url</span>:<span class="hljs-string">&quot;http://ip:port//servlet&quot;</span>,<span class="hljs-comment">//地址</span><br>        <span class="hljs-attr">data</span>:<span class="hljs-string">&quot;action=JQueryAjax&quot;</span>,<span class="hljs-comment">//servlet的哪个函数</span><br>        <span class="hljs-attr">type</span>:<span class="hljs-string">&quot;GET&quot;</span>,<span class="hljs-comment">//类型</span><br>        <span class="hljs-attr">success</span>:<span class="hljs-keyword">function</span> (<span class="hljs-params">data<span class="hljs-comment">//data就是传回来的对象</span></span><br><span class="hljs-params">        </span>) &#123;<br>            $(<span class="hljs-string">&quot;#msg&quot;</span>).<span class="hljs-title function_">html</span>(<span class="hljs-string">&quot;编号&quot;</span>+data.<span class="hljs-property">id</span>+<span class="hljs-string">&quot;姓名&quot;</span>+data.<span class="hljs-property">name</span>);<br>        &#125;<br>        <span class="hljs-attr">dataType</span>:<span class="hljs-string">&quot;json&quot;</span> <span class="hljs-comment">//&quot;表示响应的类型&quot;,也就是data 的类型</span><br>    &#125;)<br></code></pre></td></tr></table></figure>

<ul>
<li><p>$.get和&amp;.post是ajax的方法，少了type</p>
<ul>
<li>url</li>
<li>data</li>
<li>callback</li>
<li>type</li>
</ul>
</li>
<li><p>$getJson</p>
<ul>
<li>请求是get</li>
<li>返回是json</li>
<li>url</li>
<li>data</li>
<li>callback</li>
</ul>
</li>
<li><p>serialize()</p>
</li>
</ul>
<p>serialize()可以把表单中所有表单项的内容都获取到，并以name&#x3D;value&amp;name&#x3D;value的形式进行拼接。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs javascript">$(<span class="hljs-string">&quot;#form&quot;</span>).<span class="hljs-property">serialize</span><br></code></pre></td></tr></table></figure>



<h2 id="书城项目"><a href="#书城项目" class="headerlink" title="书城项目"></a>书城项目</h2><h3 id="1-环境搭建"><a href="#1-环境搭建" class="headerlink" title="1.环境搭建"></a>1.环境搭建</h3><p><img src="https://s1.ax1x.com/2022/04/11/LVWWgP.png"></p>
<p>在IDEA中建好相应的包，导入相关的页面资源</p>
<p>[<img src="https://s1.ax1x.com/2022/04/11/LVf3xP.png" alt="LVf3xP.png"></p>
<h3 id="2-创建需要的数据库和表"><a href="#2-创建需要的数据库和表" class="headerlink" title="2.创建需要的数据库和表"></a>2.创建需要的数据库和表</h3><ul>
<li>id</li>
<li>用户名</li>
<li>密码</li>
<li>邮箱</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> DATABASE `book`<br>USE `book`<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> t_user(<br>   `id` <span class="hljs-type">INT</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTO_INCREMENT,<br>   `username` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">UNIQUE</span>,<br>   `password` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>   `email` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">200</span>)<br>);<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> t_user(`username`,`password`,`email`)<br><span class="hljs-keyword">VALUES</span>(<span class="hljs-string">&#x27;admin&#x27;</span>,<span class="hljs-string">&#x27;admin&#x27;</span>,<span class="hljs-string">&#x27;admin@guigu.com&#x27;</span>);<br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> t_user;<br></code></pre></td></tr></table></figure>

<h3 id="3-创建数据库表对于的JavaBean对象"><a href="#3-创建数据库表对于的JavaBean对象" class="headerlink" title="3.创建数据库表对于的JavaBean对象"></a>3.创建数据库表对于的JavaBean对象</h3><ul>
<li>数据库的数据是可以为null的，所以基本数据类型要是用包装类进行&#x3D;&#x3D;null比较</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.atguigu.pojo;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> &#123;<br>    <span class="hljs-keyword">private</span> Integer id;<br>    <span class="hljs-keyword">private</span> String username;<br>    <span class="hljs-keyword">private</span> String password;<br>    <span class="hljs-keyword">private</span> String email;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">User</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">User</span><span class="hljs-params">(Integer id, String username, String password, String email)</span> &#123;<br>        <span class="hljs-built_in">this</span>.id = id;<br>        <span class="hljs-built_in">this</span>.username = username;<br>        <span class="hljs-built_in">this</span>.password = password;<br>        <span class="hljs-built_in">this</span>.email = email;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> Integer <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> id;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Integer id)</span> &#123;<br>        <span class="hljs-built_in">this</span>.id = id;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getUsername</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> username;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setUsername</span><span class="hljs-params">(String username)</span> &#123;<br>        <span class="hljs-built_in">this</span>.username = username;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getPassword</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> password;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPassword</span><span class="hljs-params">(String password)</span> &#123;<br>        <span class="hljs-built_in">this</span>.password = password;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getEmail</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> email;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setEmail</span><span class="hljs-params">(String email)</span> &#123;<br>        <span class="hljs-built_in">this</span>.email = email;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;User&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;id=&quot;</span> + id +<br>                <span class="hljs-string">&quot;, username=&#x27;&quot;</span> + username + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, password=&#x27;&quot;</span> + password + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, email=&#x27;&quot;</span> + email + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>    <br>&#125;<br><br></code></pre></td></tr></table></figure>

<h3 id="4-编写工具类jdbcUtils"><a href="#4-编写工具类jdbcUtils" class="headerlink" title="4.编写工具类jdbcUtils"></a>4.编写工具类jdbcUtils</h3><h4 id="1-导入相关依赖的包"><a href="#1-导入相关依赖的包" class="headerlink" title="1.导入相关依赖的包"></a>1.导入相关依赖的包</h4><ul>
<li>druid</li>
</ul>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=Druid&spm=1001.2101.3001.7020">Druid</a>是一个<strong>数据库连接池</strong>。Druid是目前最好的数据库连接池，在功能、性能、扩展性方面，都超过其他数据库连接池，包DBCP、C3P0、BoneCP、Proxool、JBoss DataSource。Druid已经在阿里巴巴部署了超过600个应用，经过一年多生产环境大规模部署的严苛考验。<strong>Druid是阿里巴巴开发的号称为监控而生的数据库连接池！</strong></p>
</blockquote>
<ul>
<li>mysql-connector</li>
</ul>
<blockquote>
<p>mysql-connector-java 是MySQL提供的<strong>JDBC驱动包</strong>，用JDBC连接MySQL数据库时必须使用该jar包，它的主要用途有三个：</p>
<ol>
<li>与数据库建立连接</li>
<li>发送 SQL 语句</li>
<li>处理结果</li>
</ol>
</blockquote>
<ul>
<li>junit</li>
</ul>
<blockquote>
<p>junit是一个Java语言的单元测试框架，用于编写和运行可重复的测试。他是用于单元测试框架体系xUnit的一个实例</p>
</blockquote>
<ul>
<li>hamcrest-core</li>
</ul>
<blockquote>
<p>Hamcrest是一个书写匹配器对象时允许直接定义匹配规则的框架.有大量的匹配器是侵入式的,例如UI验证或者数据过滤,但是匹配对象在书写灵活的测试是最常用.使用Hamcrest进行单元测试.</p>
</blockquote>
<h4 id="2-编写jdbc配置文件"><a href="#2-编写jdbc配置文件" class="headerlink" title="2.编写jdbc配置文件"></a>2.编写jdbc配置文件</h4><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">username</span>=<span class="hljs-string">root</span><br><span class="hljs-attr">password</span>=<span class="hljs-string">123456</span><br><span class="hljs-attr">url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/book?characterEncoding=utf8&amp;useSSL=false</span><br><span class="hljs-attr">driverClassName</span>=<span class="hljs-string">com.mysql.jdbc.Driver</span><br><span class="hljs-attr">initialSize</span>=<span class="hljs-string">5</span><br><span class="hljs-attr">maxActive</span>=<span class="hljs-string">10</span><br></code></pre></td></tr></table></figure>

<h4 id="3-编写JdbcUtils"><a href="#3-编写JdbcUtils" class="headerlink" title="3.编写JdbcUtils"></a>3.编写JdbcUtils</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.atguigu.utils;<br><br><span class="hljs-keyword">import</span> com.alibaba.druid.pool.DruidDataSource;<br><span class="hljs-keyword">import</span> com.alibaba.druid.pool.DruidDataSourceFactory;<br><br><span class="hljs-keyword">import</span> java.io.InputStream;<br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JdbcUtils</span> &#123;<br>    <span class="hljs-keyword">private</span>  <span class="hljs-keyword">static</span> DruidDataSource dataSource;<br>			<span class="hljs-comment">//静态代码块先加载</span><br>    <span class="hljs-keyword">static</span> &#123;<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span><span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>            <span class="hljs-comment">//读取jdbc.properties属性配置文件</span><br>            <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> JdbcUtils.class.getClassLoader().getResourceAsStream(<span class="hljs-string">&quot;jdbc.properties&quot;</span>);<br>            <span class="hljs-comment">//从流中加载数据</span><br>            properties.load(inputStream);<br>            <span class="hljs-comment">//创建数据库连接池</span><br>            dataSource= (DruidDataSource) DruidDataSourceFactory.createDataSource(properties);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br><br>    &#125;<br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 获取数据库连接</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 如果返回null，说明连接失败</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Connection <span class="hljs-title function_">getConnection</span><span class="hljs-params">()</span>&#123;<br>        Connection conn=<span class="hljs-literal">null</span>;<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            conn=dataSource.getConnection();<br>        &#125; <span class="hljs-keyword">catch</span> (Exception throwables) &#123;<br>            throwables.printStackTrace();<br>        &#125;<br>        <span class="hljs-keyword">return</span> conn;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 关闭连接，放回数据库连接池</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> conn</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">closeConnection</span><span class="hljs-params">(Connection conn)</span>&#123;<br>        <span class="hljs-keyword">if</span> (conn!=<span class="hljs-literal">null</span>)&#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                conn.close();<br>            &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>                e.printStackTrace();<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h4 id="4-编写JdbcUtils测试类"><a href="#4-编写JdbcUtils测试类" class="headerlink" title="4.编写JdbcUtils测试类"></a>4.编写JdbcUtils测试类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.atguigu.test;<br><br><span class="hljs-keyword">import</span> com.atguigu.utils.JdbcUtils;<br><span class="hljs-keyword">import</span> org.junit.Test;<br><br><span class="hljs-keyword">import</span> java.sql.Connection;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JdbcUtilsTest</span> &#123;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span>  <span class="hljs-title function_">jdbcUtilsTest</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-comment">//使用完后一定要关闭连接！！！</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) &#123;<br>            <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> JdbcUtils.getConnection();<br>            System.out.println(connection);<br>            JdbcUtils.closeConnection(connection);<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h3 id="5-编写BaseDao"><a href="#5-编写BaseDao" class="headerlink" title="5.编写BaseDao"></a>5.编写BaseDao</h3><ul>
<li>使用BaseDao主要的作用是减少冗余代码，在对Dao的操作中CRUD可以说是最普通最常见的操作了，基本上面对不同的数据表都会有类似的CRUD操作，BaseDao的思想就是把这些冗余的操作抽取出来，作为一个抽象出来的类，使用这个BaseDao可以使我们的代码更优雅</li>
</ul>
<p>1.导入相关的包</p>
<blockquote>
<p>Commons DbUtils是<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/Apache/8512995">Apache</a>组织提供的一个对<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/JDBC">JDBC</a>进行简单封装的开源工具类库，使用它能够简化<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/JDBC">JDBC</a>应用程序的开发，同时也不会影响程序的性能</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.atguigu.dao.impl;<br><br><span class="hljs-keyword">import</span> com.atguigu.utils.JdbcUtils;<br><span class="hljs-keyword">import</span> org.apache.commons.dbutils.QueryRunner;<br><span class="hljs-keyword">import</span> org.apache.commons.dbutils.handlers.BeanHandler;<br><span class="hljs-keyword">import</span> org.apache.commons.dbutils.handlers.BeanListHandler;<br><span class="hljs-keyword">import</span> org.apache.commons.dbutils.handlers.ScalarHandler;<br><br><span class="hljs-keyword">import</span> java.sql.Connection;<br><span class="hljs-keyword">import</span> java.sql.SQLException;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseDao</span> &#123;<br><br>    <span class="hljs-keyword">private</span> QueryRunner queryRunner=<span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryRunner</span>();<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * update 用来执行增删改语句</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 返回-1表示失败，其他表示影响的行数</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">update</span><span class="hljs-params">(String sql,Object... args)</span>&#123;<br>        Connection connection= JdbcUtils.getConnection();<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">return</span> queryRunner.update(connection,sql,args);<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        <span class="hljs-keyword">finally</span> &#123;<br>            JdbcUtils.closeConnection(connection);<br>        &#125;<br>        <span class="hljs-comment">//关闭连接！！！</span><br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 返回一个javaBean的语句</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> type 返回的对象类型</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> sql  执行的sql语句</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> args 传入的参数</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> &lt;T&gt;  泛型</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">queryForOne</span><span class="hljs-params">(Class&lt;T&gt;type,String sql,Object... args)</span>&#123;<br>        Connection connection=JdbcUtils.getConnection();<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">return</span> queryRunner.query(connection,sql,<span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanHandler</span>&lt;T&gt;(type),args);<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        <span class="hljs-keyword">finally</span> &#123;<br>            JdbcUtils.closeConnection(connection);<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 返回一个多个javaBean的语句</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> type 返回的对象类型</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> sql  执行的sql语句</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> args 传入的参数</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> &lt;T&gt;  泛型</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> &lt;T&gt; List&lt;T&gt; <span class="hljs-title function_">queryForList</span><span class="hljs-params">(Class&lt;T&gt;type,String sql,Object... args)</span>&#123;<br>        Connection connection=JdbcUtils.getConnection();<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">return</span> queryRunner.query(connection,sql,<span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanListHandler</span>&lt;T&gt;(type),args);<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        <span class="hljs-keyword">finally</span> &#123;<br>            JdbcUtils.closeConnection(connection);<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 执行返回查询一行一列的情况</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> sql</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> args</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span>  Object <span class="hljs-title function_">queryForSingleValue</span><span class="hljs-params">(String sql,Object... args)</span>&#123;<br>        Connection connection=JdbcUtils.getConnection();<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">return</span> queryRunner.query(connection,sql,<span class="hljs-keyword">new</span> <span class="hljs-title class_">ScalarHandler</span>(),args);<br>        &#125; <span class="hljs-keyword">catch</span> (SQLException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        <span class="hljs-keyword">finally</span> &#123;<br>            JdbcUtils.closeConnection(connection);<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h3 id="6-编写UserDao和测试"><a href="#6-编写UserDao和测试" class="headerlink" title="6.编写UserDao和测试"></a>6.编写UserDao和测试</h3><h4 id="1-编写UserDao接口"><a href="#1-编写UserDao接口" class="headerlink" title="1.编写UserDao接口"></a>1.编写UserDao接口</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.atguigu.dao;<br><br><span class="hljs-keyword">import</span> com.atguigu.pojo.User;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserDao</span> &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 通过用户名查询用户信息</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> username 用户名</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 如果返回null，说明没有这个用户</span><br><span class="hljs-comment">     */</span><br>    User <span class="hljs-title function_">queryUerByUsername</span><span class="hljs-params">(String username)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 根据用户名和密码查询用户</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> username</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> password</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 如果返回null，说明用户名或者密码错误</span><br><span class="hljs-comment">     */</span><br>    User <span class="hljs-title function_">queryUerByUsernameAndPassword</span><span class="hljs-params">(String username,String password)</span>;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 保存用户信息到数据库</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> user</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">(User user)</span>;<br><br><br>&#125;<br><br></code></pre></td></tr></table></figure>

<h4 id="2-编写UserDao实现类"><a href="#2-编写UserDao实现类" class="headerlink" title="2.编写UserDao实现类"></a>2.编写UserDao实现类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.atguigu.dao.impl;<br><br><span class="hljs-keyword">import</span> com.atguigu.dao.UserDao;<br><span class="hljs-keyword">import</span> com.atguigu.pojo.User;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserDaoImpl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseDao</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserDao</span> &#123;<br>    <span class="hljs-comment">//继承BaseDao，并且实现UserDao接口</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">queryUerByUsername</span><span class="hljs-params">(String username)</span> &#123;<br>        String sql=<span class="hljs-string">&quot;select `id`,`username`,`password`,`email` from t_user where username=?&quot;</span>;<br>        <span class="hljs-keyword">return</span> queryForOne(User.class,sql,username);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">queryUerByUsernameAndPassword</span><span class="hljs-params">(String username, String password)</span> &#123;<br>        String sql=<span class="hljs-string">&quot;select `id`,`username`,`password`,`email` from t_user where username=? and password=?&quot;</span>;<br>        <span class="hljs-keyword">return</span> queryForOne(User.class,sql,username,password);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">(User user)</span> &#123;<br>        String sql=<span class="hljs-string">&quot;INSERT INTO t_user(`username`,`password`,`email`) VALUES(?,?,?)&quot;</span>;<br>        <span class="hljs-keyword">return</span> update(sql,user.getUsername(),user.getPassword(),user.getEmail());<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h4 id="3-编写UserDao测试类"><a href="#3-编写UserDao测试类" class="headerlink" title="3.编写UserDao测试类"></a>3.编写UserDao测试类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.atguigu.test;<br><br><span class="hljs-keyword">import</span> com.atguigu.dao.UserDao;<br><span class="hljs-keyword">import</span> com.atguigu.dao.impl.UserDaoImpl;<br><span class="hljs-keyword">import</span> com.atguigu.pojo.User;<br><span class="hljs-keyword">import</span> org.junit.Test;<br><br><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> org.junit.Assert.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserDaoTest</span> &#123;<br>    UserDao userDao=<span class="hljs-keyword">new</span> <span class="hljs-title class_">UserDaoImpl</span>();<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">queryUerByUsername</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span>(userDao.queryUerByUsername(<span class="hljs-string">&quot;admin&quot;</span>)==<span class="hljs-literal">null</span>)&#123;<br>            System.out.println(<span class="hljs-string">&quot;用户名可用！&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;用户名已存在！&quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">queryUerByUsernameAndPassword</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span>(userDao.queryUerByUsernameAndPassword(<span class="hljs-string">&quot;admin&quot;</span>,<span class="hljs-string">&quot;admin&quot;</span>)==<span class="hljs-literal">null</span>)&#123;<br>            System.out.println(<span class="hljs-string">&quot;用户名或密码错误！&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;登录成功！&quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">()</span> &#123;<br>        User user=<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-literal">null</span>,<span class="hljs-string">&quot;hello&quot;</span>,<span class="hljs-string">&quot;123456&quot;</span>,<span class="hljs-string">&quot;1245@qq.com&quot;</span>);<br>        System.out.println(userDao.saveUser(user));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="7-编写UserService和测试"><a href="#7-编写UserService和测试" class="headerlink" title="7.编写UserService和测试"></a>7.编写UserService和测试</h3><h4 id="1-UserService接口"><a href="#1-UserService接口" class="headerlink" title="1.UserService接口"></a>1.UserService接口</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.atguigu.service;<br><br><span class="hljs-keyword">import</span> com.atguigu.pojo.User;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserService</span> &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 注册用户</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> user</span><br><span class="hljs-comment">     */</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerUser</span><span class="hljs-params">(User user)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 用户登录</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> user</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">login</span><span class="hljs-params">(User user)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 检测用户名是否存在</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> username</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> 返回true表示用户名已经存在，返回false说明用户名可用</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">existsUsername</span><span class="hljs-params">(String username)</span>;<br><br><br>&#125;<br><br></code></pre></td></tr></table></figure>

<h4 id="2-UserServiceImpl"><a href="#2-UserServiceImpl" class="headerlink" title="2.UserServiceImpl"></a>2.UserServiceImpl</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.atguigu.service.impl;<br><br><span class="hljs-keyword">import</span> com.atguigu.dao.UserDao;<br><span class="hljs-keyword">import</span> com.atguigu.dao.impl.UserDaoImpl;<br><span class="hljs-keyword">import</span> com.atguigu.pojo.User;<br><span class="hljs-keyword">import</span> com.atguigu.service.UserService;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> &#123;<br>    <span class="hljs-keyword">private</span> UserDao userDao=<span class="hljs-keyword">new</span> <span class="hljs-title class_">UserDaoImpl</span>();<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerUser</span><span class="hljs-params">(User user)</span> &#123;<br>        userDao.saveUser(user);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">login</span><span class="hljs-params">(User user)</span> &#123;<br>        <span class="hljs-keyword">return</span> userDao.queryUerByUsernameAndPassword(user.getUsername(),user.getPassword());<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">existsUsername</span><span class="hljs-params">(String username)</span> &#123;<br>        <span class="hljs-keyword">if</span>(userDao.queryUerByUsername(username)==<span class="hljs-literal">null</span>)&#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<h4 id="3-UserService测试"><a href="#3-UserService测试" class="headerlink" title="3.UserService测试"></a>3.UserService测试</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.atguigu.test;<br><br><span class="hljs-keyword">import</span> com.atguigu.pojo.User;<br><span class="hljs-keyword">import</span> com.atguigu.service.UserService;<br><span class="hljs-keyword">import</span> com.atguigu.service.impl.UserServiceImpl;<br><span class="hljs-keyword">import</span> org.junit.Test;<br><br><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> org.junit.Assert.*;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceTest</span> &#123;<br>    UserService userService=<span class="hljs-keyword">new</span> <span class="hljs-title class_">UserServiceImpl</span>();<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerUser</span><span class="hljs-params">()</span> &#123;<br>        userService.registerUser(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-literal">null</span>,<span class="hljs-string">&quot;bbj&quot;</span>,<span class="hljs-string">&quot;666&quot;</span>,<span class="hljs-string">&quot;1265@qq.com&quot;</span>));<br>        userService.registerUser(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-literal">null</span>,<span class="hljs-string">&quot;asdbbj&quot;</span>,<span class="hljs-string">&quot;666&quot;</span>,<span class="hljs-string">&quot;124465@qq.com&quot;</span>));<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">login</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(userService.login(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-literal">null</span>,<span class="hljs-string">&quot;wzg&quot;</span>,<span class="hljs-string">&quot;hhh&quot;</span>,<span class="hljs-string">&quot;guug@qq.com&quot;</span>)));<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">existsUsername</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span>(userService.existsUsername(<span class="hljs-string">&quot;bbj&quot;</span>))&#123;<br>            System.out.println(<span class="hljs-string">&quot;用户名已存在&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;用户名可用&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="8-实现注册登录功能"><a href="#8-实现注册登录功能" class="headerlink" title="8.实现注册登录功能"></a>8.实现注册登录功能</h3><ul>
<li><strong>注册</strong></li>
</ul>
<ol>
<li><p>获取请求的参数</p>
</li>
<li><p>检查验证码是否正确</p>
<ul>
<li>正确</li>
</ul>
<ol>
<li>检查用户名是否存在<ul>
<li>存在则跳回注册页面</li>
<li>不存在则保存到数据库并跳转到注册成功</li>
</ul>
</li>
</ol>
<ul>
<li>不正确<ul>
<li>跳转到注册页面</li>
</ul>
</li>
</ul>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.atguigu.web;<br><br><span class="hljs-keyword">import</span> com.atguigu.pojo.User;<br><span class="hljs-keyword">import</span> com.atguigu.service.UserService;<br><span class="hljs-keyword">import</span> com.atguigu.service.impl.UserServiceImpl;<br><br><span class="hljs-keyword">import</span> javax.servlet.ServletException;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RegisterServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">UserService</span> <span class="hljs-variable">userService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserServiceImpl</span>();<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-comment">//1.获取请求的参数</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;username&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;password&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">email</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;email&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">code</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;code&quot;</span>);<br>        <span class="hljs-comment">//2.验证码为=abcde</span><br>        <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;abcde&quot;</span>.equalsIgnoreCase(code)) &#123;<br>            <span class="hljs-comment">//验证成功</span><br>            <span class="hljs-keyword">if</span> (userService.existsUsername(username)) &#123;<br>                System.out.println(<span class="hljs-string">&quot;用户名&quot;</span> + username + <span class="hljs-string">&quot;已经存在&quot;</span>);<br>                req.getRequestDispatcher(<span class="hljs-string">&quot;/pages/user/regist.html&quot;</span>).forward(req, resp);<br>                <span class="hljs-comment">//存在，不可以</span><br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                userService.registerUser(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-literal">null</span>, username, password, email));<br>                req.getRequestDispatcher(<span class="hljs-string">&quot;/pages/user/regist_success.html&quot;</span>).forward(req, resp);<br>                <span class="hljs-comment">//可以</span><br>            &#125;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-comment">//验证失败</span><br>            System.out.println(<span class="hljs-string">&quot;验证码错误&quot;</span>);<br>            req.getRequestDispatcher(<span class="hljs-string">&quot;/pages/user/regist.html&quot;</span>).forward(req, resp);<br>        &#125;<br><br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        doPost(req, resp);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<ul>
<li><strong>登录</strong></li>
</ul>
<ol>
<li>获取请求的参数</li>
<li>调用xxxService处理业务</li>
<li>根据login()判断是否成功<ul>
<li>成功，跳转到成功页面</li>
<li>失败，回到登录页面</li>
</ul>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.atguigu.web;<br><br><span class="hljs-keyword">import</span> com.atguigu.pojo.User;<br><span class="hljs-keyword">import</span> com.atguigu.service.UserService;<br><span class="hljs-keyword">import</span> com.atguigu.service.impl.UserServiceImpl;<br><br><span class="hljs-keyword">import</span> javax.servlet.ServletException;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br>    <span class="hljs-keyword">private</span> UserService userService=<span class="hljs-keyword">new</span> <span class="hljs-title class_">UserServiceImpl</span>();<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doPost</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        <span class="hljs-comment">//1.获取请求参数</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;username&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;password&quot;</span>);<br>        <span class="hljs-comment">//2.调用</span><br>        <span class="hljs-type">User</span> <span class="hljs-variable">loginUser</span> <span class="hljs-operator">=</span> userService.login(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-literal">null</span>, username, password, <span class="hljs-literal">null</span>));<br>        <span class="hljs-keyword">if</span>(loginUser==<span class="hljs-literal">null</span>)&#123;<br>            System.out.println(<span class="hljs-string">&quot;登录失败&quot;</span>);<br>            req.getRequestDispatcher(<span class="hljs-string">&quot;/pages/user/login.html&quot;</span>).forward(req, resp);<br>            <span class="hljs-comment">//登录失败</span><br>        &#125;<br>        <span class="hljs-keyword">else</span> &#123;<br>            req.getRequestDispatcher(<span class="hljs-string">&quot;/pages/user/login_success.html&quot;</span>).forward(req, resp);<br>            <span class="hljs-comment">//登录成功</span><br>        &#125;<br><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>



<h3 id="9-验证码功能实现"><a href="#9-验证码功能实现" class="headerlink" title="9.验证码功能实现"></a>9.验证码功能实现</h3><p><img src="https://s1.ax1x.com/2022/04/17/LU3emV.png"></p>
<h4 id="谷歌kaptcha验证码"><a href="#谷歌kaptcha验证码" class="headerlink" title="谷歌kaptcha验证码"></a>谷歌kaptcha验证码</h4><h5 id="1-导入kaptcha包"><a href="#1-导入kaptcha包" class="headerlink" title="1.导入kaptcha包"></a>1.导入kaptcha包</h5><blockquote>
<p>Kaptcha 是一个可高度配置的实用验证码生成工具，可自由配置的选项如：</p>
<ul>
<li><p>验证码的字体</p>
</li>
<li><p>验证码字体的大小</p>
</li>
<li><p>验证码字体的字体颜色</p>
</li>
<li><p>验证码内容的范围(数字，字母，中文汉字！)</p>
</li>
<li><p>验证码图片的大小，边框，边框粗细，边框颜色</p>
</li>
<li><p>验证码的干扰线</p>
</li>
<li><p>验证码的样式(鱼眼样式、3D、普通模糊)</p>
</li>
</ul>
</blockquote>
<p>kapacha依赖包</p>
<p><a target="_blank" rel="noopener" href="https://mvnrepository.com/artifact/com.jhlabs/filters/2.0.235">Maven Repository: com.jhlabs » filters » 2.0.235 (mvnrepository.com)</a></p>
<h5 id="2-直接配置Servlet"><a href="#2-直接配置Servlet" class="headerlink" title="2.直接配置Servlet"></a>2.直接配置Servlet</h5><p><img src="https://s1.ax1x.com/2022/04/17/LUG2WQ.png"></p>
<ul>
<li>官方已经写好了类，直接配置</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">servlet</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>KaptchaServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-class</span>&gt;</span>com.google.code.kaptcha.servlet.KaptchaServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-class</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">servlet-mapping</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">servlet-name</span>&gt;</span>KaptchaServlet<span class="hljs-tag">&lt;/<span class="hljs-name">servlet-name</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">url-pattern</span>&gt;</span>/kaptcha.jpg<span class="hljs-tag">&lt;/<span class="hljs-name">url-pattern</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">servlet-mapping</span>&gt;</span><br></code></pre></td></tr></table></figure>

<ul>
<li>访问&#x2F;kapatcha.jpg</li>
</ul>
<p><img src="https://s1.ax1x.com/2022/04/17/LUBWNR.gif"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        System.out.println(<span class="hljs-string">&quot;调用了doGet方法&quot;</span>);<br>        <span class="hljs-comment">//获取sessoin中的验证码- 从服务器中获取</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> (String) req.getSession().getAttribute(KAPTCHA_SESSION_KEY);<br>        <span class="hljs-comment">//马上删除,防止表单重复提交</span><br>        req.getSession().removeAttribute(KAPTCHA_SESSION_KEY);<br><br>        <span class="hljs-comment">//从客户端获取验证码</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">code</span> <span class="hljs-operator">=</span> req.getParameter(<span class="hljs-string">&quot;code&quot;</span>);<br><br>        <span class="hljs-keyword">if</span>(token!=<span class="hljs-literal">null</span>&amp;&amp;token.equalsIgnoreCase(code))&#123;<br>            System.out.println(<span class="hljs-string">&quot;保存到数据库&quot;</span>);<br>        &#125;<span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;请不要重复提交表单&quot;</span>);<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure>

<h2 id="i18国际化"><a href="#i18国际化" class="headerlink" title="i18国际化"></a>i18国际化</h2><h3 id="1-什么是i18n国际化"><a href="#1-什么是i18n国际化" class="headerlink" title="1.什么是i18n国际化"></a>1.什么是i18n国际化</h3><ul>
<li>国际化（Internationalization)指的是同一个网站可以支持多种不同的语言，以方便不同国家，不同语种的用户访问。关于国际化我们想到的最简单的方案就是为不同的国家创建不同的网站.</li>
<li>苹果公司这种方案并不适合全部公司，而我们希望相同的一个网站，而不同人访问的时候可以根据用户所在的区域显示不同的语言文字，而网站的布局样式等不发生改变。</li>
<li>于是就有了我们说的国际化，国际化总的来说就是同一个网站不同国家的人来访问可以显示出不同的语言。但实际上这<br>种需求并不强烈，一般真的有国际化需求的公司，主流采用的依然是苹果公司的那种方案，为不同的国家创建不同的页面。</li>
<li>国际化的英文Internationalization，但是由于拼写过长，老外想了一个简单的写法叫做l18N，代表的是Internationalization<br>这个单词，以开头，以N结尾，而中间是18个字母，所以简写为18N。以后我们说18N和国际化是一个意思。</li>
</ul>
<h3 id="2-国际化要求"><a href="#2-国际化要求" class="headerlink" title="2.国际化要求"></a>2.国际化要求</h3><p><img src="https://s1.ax1x.com/2022/04/26/LHDG7R.png"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://lw-maple.github.io">Lost丶逝水如风</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://lw-maple.github.io/2022/04/26/2022-4-26-%E3%80%90JavaWeb%E5%AD%A6%E4%B9%A0%E3%80%91/">https://lw-maple.github.io/2022/04/26/2022-4-26-【JavaWeb学习】/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://lw-maple.github.io" target="_blank">漫漫长夜</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/JavaWeb/">JavaWeb</a></div><div class="post_share"><div class="social-share" data-image="/img/coverImg/13.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/05/01/2022-5-1-%E3%80%90LeetCode%E7%99%BE%E9%A2%98(%20%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E6%89%80%E6%9C%89%E8%B7%AF%E5%BE%84)%E3%80%91/"><img class="prev-cover" src="/img/coverImg/15.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">LeetCode百题【 二叉树的所有路径】</div></div></a></div><div class="next-post pull-right"><a href="/2022/04/25/2022-4-25-%E3%80%90LeetCode%E7%99%BE%E9%A2%98(%E5%90%88%E5%B9%B6%E4%B8%A4%E4%B8%AA%E6%9C%89%E5%BA%8F%E9%93%BE%E8%A1%A8)%E3%80%91/"><img class="next-cover" src="/img/coverImg/3.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">LeetCode百题【合并两个有序链表】</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#JavaWeb%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">JavaWeb概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFjavaweb%EF%BC%9F"><span class="toc-number">1.1.</span> <span class="toc-text">什么是javaweb？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Web%E8%B5%84%E6%BA%90%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">1.2.</span> <span class="toc-text">Web资源的分类</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Servlet%E6%8A%80%E6%9C%AF"><span class="toc-number">2.</span> <span class="toc-text">Servlet技术</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AFServlet"><span class="toc-number">2.1.</span> <span class="toc-text">1.什么是Servlet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Servlet%E5%AE%9E%E7%8E%B0"><span class="toc-number">2.2.</span> <span class="toc-text">2.Servlet实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%BB%A7%E6%89%BFHttpservlet%E5%AE%9E%E7%8E%B0Servlet%E7%A8%8B%E5%BA%8F"><span class="toc-number">2.3.</span> <span class="toc-text">3.继承Httpservlet实现Servlet程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E4%B8%8E%E4%B8%8E%E5%93%8D%E5%BA%94"><span class="toc-number">2.4.</span> <span class="toc-text">请求与与响应</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#HttpServletRequest"><span class="toc-number">2.4.1.</span> <span class="toc-text">HttpServletRequest</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91"><span class="toc-number">2.4.2.</span> <span class="toc-text">请求转发</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">2.4.3.</span> <span class="toc-text">请求重定向</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HttpServletResponse"><span class="toc-number">2.4.4.</span> <span class="toc-text">HttpServletResponse</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-ServletConfig%E7%B1%BB"><span class="toc-number">2.5.</span> <span class="toc-text">4.ServletConfig类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-ServletContext"><span class="toc-number">2.6.</span> <span class="toc-text">5.ServletContext</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.6.1.</span> <span class="toc-text">1.介绍</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%85%B7%E4%BD%93%E5%AE%9E%E7%8E%B0"><span class="toc-number">2.6.2.</span> <span class="toc-text">2.具体实现</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C"><span class="toc-number">2.6.3.</span> <span class="toc-text">3.测试结果</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-servlet%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">2.7.</span> <span class="toc-text">6.servlet生命周期</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Listener%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-number">3.</span> <span class="toc-text">Listener监听器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AFListener%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-number">3.1.</span> <span class="toc-text">1.什么是Listener监听器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Filter%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">4.</span> <span class="toc-text">Filter过滤器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AFFliter%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">4.1.</span> <span class="toc-text">1.什么是Fliter过滤器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Filter%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-number">4.2.</span> <span class="toc-text">Filter的实现</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JavaEE%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84"><span class="toc-number">5.</span> <span class="toc-text">JavaEE三层架构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Web%E5%B1%82-x2F-%E8%A7%86%E5%9B%BE%E5%B1%95%E7%8E%B0%E5%B1%82"><span class="toc-number">5.1.</span> <span class="toc-text">1.Web层&#x2F;视图展现层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Service-%E4%B8%9A%E5%8A%A1%E5%B1%82"><span class="toc-number">5.2.</span> <span class="toc-text">2.Service 业务层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-DAO-%E6%8C%81%E4%B9%85%E5%B1%82"><span class="toc-number">5.3.</span> <span class="toc-text">3.DAO 持久层</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Cookie%E4%B8%8ESession"><span class="toc-number">6.</span> <span class="toc-text">Cookie与Session</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AFCookie%E4%B8%8ESession"><span class="toc-number">6.1.</span> <span class="toc-text">1.什么是Cookie与Session</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Cookie%E4%B8%8ESession%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-number">6.2.</span> <span class="toc-text">2.Cookie与Session的实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%80%BB%E7%BB%93"><span class="toc-number">6.3.</span> <span class="toc-text">3.总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93"><span class="toc-number">7.</span> <span class="toc-text">文件传输</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">7.1.</span> <span class="toc-text">文件上传</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%AF%BC%E5%8C%85"><span class="toc-number">7.1.1.</span> <span class="toc-text">1.导包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">7.1.2.</span> <span class="toc-text">2.文件上传</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD"><span class="toc-number">7.2.</span> <span class="toc-text">文件下载</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%AE%9E%E7%8E%B0%E4%BB%A3%E7%A0%81"><span class="toc-number">7.2.1.</span> <span class="toc-text">1.实现代码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JSON"><span class="toc-number">8.</span> <span class="toc-text">JSON</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AFJSON"><span class="toc-number">8.1.</span> <span class="toc-text">1.什么是JSON</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-JSON%E5%9C%A8JS%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">8.2.</span> <span class="toc-text">2. JSON在JS中的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#json%E5%AF%B9%E8%B1%A1%E5%92%8Cjson%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">8.2.1.</span> <span class="toc-text">json对象和json字符串</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-JSON%E5%9C%A8JAVA%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">8.3.</span> <span class="toc-text">3.JSON在JAVA中的使用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AJAX"><span class="toc-number">9.</span> <span class="toc-text">AJAX</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AFAJAX"><span class="toc-number">9.1.</span> <span class="toc-text">1.什么是AJAX</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-AJAX%E4%BD%BF%E7%94%A8"><span class="toc-number">9.2.</span> <span class="toc-text">2.AJAX使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-JQuery%E7%9A%84AJAX"><span class="toc-number">9.3.</span> <span class="toc-text">3.JQuery的AJAX</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%A6%E5%9F%8E%E9%A1%B9%E7%9B%AE"><span class="toc-number">10.</span> <span class="toc-text">书城项目</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-number">10.1.</span> <span class="toc-text">1.环境搭建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%88%9B%E5%BB%BA%E9%9C%80%E8%A6%81%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%92%8C%E8%A1%A8"><span class="toc-number">10.2.</span> <span class="toc-text">2.创建需要的数据库和表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E5%AF%B9%E4%BA%8E%E7%9A%84JavaBean%E5%AF%B9%E8%B1%A1"><span class="toc-number">10.3.</span> <span class="toc-text">3.创建数据库表对于的JavaBean对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%BC%96%E5%86%99%E5%B7%A5%E5%85%B7%E7%B1%BBjdbcUtils"><span class="toc-number">10.4.</span> <span class="toc-text">4.编写工具类jdbcUtils</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%AF%BC%E5%85%A5%E7%9B%B8%E5%85%B3%E4%BE%9D%E8%B5%96%E7%9A%84%E5%8C%85"><span class="toc-number">10.4.1.</span> <span class="toc-text">1.导入相关依赖的包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%BC%96%E5%86%99jdbc%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">10.4.2.</span> <span class="toc-text">2.编写jdbc配置文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E7%BC%96%E5%86%99JdbcUtils"><span class="toc-number">10.4.3.</span> <span class="toc-text">3.编写JdbcUtils</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E7%BC%96%E5%86%99JdbcUtils%E6%B5%8B%E8%AF%95%E7%B1%BB"><span class="toc-number">10.4.4.</span> <span class="toc-text">4.编写JdbcUtils测试类</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E7%BC%96%E5%86%99BaseDao"><span class="toc-number">10.5.</span> <span class="toc-text">5.编写BaseDao</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E7%BC%96%E5%86%99UserDao%E5%92%8C%E6%B5%8B%E8%AF%95"><span class="toc-number">10.6.</span> <span class="toc-text">6.编写UserDao和测试</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%BC%96%E5%86%99UserDao%E6%8E%A5%E5%8F%A3"><span class="toc-number">10.6.1.</span> <span class="toc-text">1.编写UserDao接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%BC%96%E5%86%99UserDao%E5%AE%9E%E7%8E%B0%E7%B1%BB"><span class="toc-number">10.6.2.</span> <span class="toc-text">2.编写UserDao实现类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E7%BC%96%E5%86%99UserDao%E6%B5%8B%E8%AF%95%E7%B1%BB"><span class="toc-number">10.6.3.</span> <span class="toc-text">3.编写UserDao测试类</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E7%BC%96%E5%86%99UserService%E5%92%8C%E6%B5%8B%E8%AF%95"><span class="toc-number">10.7.</span> <span class="toc-text">7.编写UserService和测试</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-UserService%E6%8E%A5%E5%8F%A3"><span class="toc-number">10.7.1.</span> <span class="toc-text">1.UserService接口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-UserServiceImpl"><span class="toc-number">10.7.2.</span> <span class="toc-text">2.UserServiceImpl</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-UserService%E6%B5%8B%E8%AF%95"><span class="toc-number">10.7.3.</span> <span class="toc-text">3.UserService测试</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E5%AE%9E%E7%8E%B0%E6%B3%A8%E5%86%8C%E7%99%BB%E5%BD%95%E5%8A%9F%E8%83%BD"><span class="toc-number">10.8.</span> <span class="toc-text">8.实现注册登录功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E9%AA%8C%E8%AF%81%E7%A0%81%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="toc-number">10.9.</span> <span class="toc-text">9.验证码功能实现</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B0%B7%E6%AD%8Ckaptcha%E9%AA%8C%E8%AF%81%E7%A0%81"><span class="toc-number">10.9.1.</span> <span class="toc-text">谷歌kaptcha验证码</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%AF%BC%E5%85%A5kaptcha%E5%8C%85"><span class="toc-number">10.9.1.1.</span> <span class="toc-text">1.导入kaptcha包</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E7%9B%B4%E6%8E%A5%E9%85%8D%E7%BD%AEServlet"><span class="toc-number">10.9.1.2.</span> <span class="toc-text">2.直接配置Servlet</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#i18%E5%9B%BD%E9%99%85%E5%8C%96"><span class="toc-number">11.</span> <span class="toc-text">i18国际化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AFi18n%E5%9B%BD%E9%99%85%E5%8C%96"><span class="toc-number">11.1.</span> <span class="toc-text">1.什么是i18n国际化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%9B%BD%E9%99%85%E5%8C%96%E8%A6%81%E6%B1%82"><span class="toc-number">11.2.</span> <span class="toc-text">2.国际化要求</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Lost丶逝水如风</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>